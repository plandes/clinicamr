## Language
#
# map lemmas (in addition to named entities) as well since gsii needs them and
# MedCAT's version of the lemmas do not appear to be useful
mednlp_combine_doc_parser:
  overwrite_features: 'list: ent, ent_, lemma, lemma_'

amr_parser:
  condition:
    if: "eval: '${amr_default:parse_model}' == 't5'"
    then:
      alternate_path: '${env:home}/.cache/zensols/amr/t5-bio'
    else:
      alternate_path: null

## Paragraph
#
amr_token_cui_populator:
  class_name: zensols.clinicamr.ClinicTokenFeatureAnnotator
  role: cui
  feature_id: cui_
  remove_indexes: true

amr_paragraph_stash:
  class_name: zensols.persist.DirectoryStash
  path: 'path: ${mimic_default:shared_data_dir}/sec-para'

amr_annotator:
  stash: 'instance: amr_paragraph_stash'
  0.condition:
    if: 'eval: ${clinicamr_default:map_cuis}'
    then:
      token_index_annotator: 'instance: amr_token_index_annotator'
    else:
      token_index_annotator: null
  1.condition:
    if: 'eval: ${clinicamr_default:map_cuis}'
    then:
#      token_feature_annotator: 'instance: tuple: amr_token_ent_populator, amr_token_cui_populator'
      token_feature_annotator: 'instance: tuple: amr_token_cui_populator'
    else:
      token_feature_annotator: []

note_paragraph_factory:
  class_name: zensols.clinicamr.ClinicAmrParagraphFactory
  amr_annotator: 'instance: amr_annotator'
#  limit: 3
